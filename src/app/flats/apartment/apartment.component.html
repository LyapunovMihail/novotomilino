
<section class="apartament" *ngIf="flatData">
    <div class="apartament__nav">
        <a class="apartament__nav-link" (click)="previousRoute()">Назад</a>
    </div>
    <div class="apartament__ctrls">
        <div class="apartament__ctrls-wrap">
            <button class="apartament__ctrls-reserve" (click)="isReserveFormOpen = true">Забронировать</button>
            <button class="apartament__ctrls-credit" (click)="isCreditFormOpen = true">Заявка на ипотеку</button>
        </div>
        <div class="apartament__ctrls-wrap">
            <a class="apartament__ctrls-pdf" (click)="routePDF()" target="_blank">План {{typeApartment !== 'office' ? 'квартиры' : 'помещения'}}</a>
            <button class="apartament__ctrls-favorite" (click)="setFavorite()">
                <svg width="30" height="28" viewBox="0 0 30 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path [attr.fill]="flatData.inFavorite ? '#E7490F' : '#F9F9F9'" d="M15 1.30198L18.5059 9.73115L18.6232 10.0131L18.9276 10.0375L28.0276 10.7671L21.0944 16.7061L20.8624 16.9048L20.9333 17.2019L23.0515 26.0819L15.2606 21.3233L15 21.1641L14.7394 21.3233L6.9485 26.0819L9.06672 17.2019L9.13758 16.9048L8.90565 16.7061L1.97241 10.7671L11.0724 10.0375L11.3768 10.0131L11.4941 9.73115L15 1.30198Z" stroke="#E7490F"/>
                </svg>
            </button>
        </div>
    </div>
    <div class="apartament__container">
        <figure class="apartament__image">
            <img [src]="planPath" alt="plan" (error)="img.style.display = 'none'" #img>
            <div *ngIf="img.style.display === 'none'" class="apartament__image-error">Изображение недоступно</div>
        </figure>
        <div class="apartament__info">
            <h2 class="apartament__info-title">
                {{apartamentRooms}}, №{{flatData.flat}}
                <span *ngIf="isEuro">Евро</span>
            </h2>

            <div class="apartament__info-not-sale" *ngIf="flatData.status === '1'">
                Квартира пока не в продаже. Вы можете забронировать <br>
                ее на индивидуальных условиях, связавшись <br>
                с менеджером отдела продаж.
            </div>

            <ul class="apartament__info-list">
                <li>
                    <p>Площадь</p>
                    <p>{{flatData.space}}</p>
                </li>
                <li>
                    <p>Корпус</p>
                    <p>{{flatData.house}}</p>
                </li>
                <li>
                    <p>Секция</p>
                    <p>{{flatData.section}}</p>
                </li>
                <li>
                    <p>Этаж</p>
                    <p>{{flatData.floor}}</p>
                </li>
                <li *ngIf="typeApartment !== 'office'">
                    <p>Отделка</p>
                    <p>{{flatData.decorationName}}</p>
                </li>
                <li>
                    <p>Стоимость</p>
                    <p [class.discount]="flatData.discount">{{ (flatData.discount ? (flatData.price - flatData.discount) : flatData.price) | myBitNumberPipe}} &#8381;</p>
                </li>
                <!-- <li>
                    <p>Срок сдачи</p>
                    <p>{{flatData.deliveryDate}}</p>
                </li> -->
            </ul>
        </div>
    </div>

    <!-- <div class="apartament__furniture" *ngIf="typeApartment !== 'office' && (flatData.saleChars && flatData.saleChars.length)"> -->
    <div class="apartament__furniture" *ngIf="false">
        <label class="apartament__furniture-head" for="switcher">
            <h2 class="apartament__furniture-title">Меблировка</h2>
            <label class="apartament__furniture-switcher">
                <input id="switcher" type="checkbox" #furnitureSwitcher>
                <div></div>
            </label>
        </label>

        <app-apartment-furniture
            *ngIf="furnitureSwitcher.checked"
            [flatData]="flatData"
            [isActive]="furnitureSwitcher.checked"
        ></app-apartment-furniture>
    </div>
</section>

<app-form-credit *ngIf="flatData"
    (close)="isCreditFormOpen = $event"
    [isOpen]="isCreditFormOpen"
    (isSubmited)="isFormSuccessOpen = $event"
    [apartmentPrice]="flatData.price"
    [apartmentNumber]="flatData.flat"
    [type]="flatData.type"
    [articleId]="flatData.articleId">
</app-form-credit>
<app-form-reserve *ngIf="flatData"
    (close)="isReserveFormOpen = $event"
    [isOpen]="isReserveFormOpen"
    (isSubmited)="isFormSuccessOpen = $event"
    [apartmentPrice]="flatData.price"
    [apartmentNumber]="flatData.flat"
    [type]="flatData.type"
    [articleId]="flatData.articleId">
</app-form-reserve>

<app-form-success *ngIf="flatData"
    (close)="isFormSuccessOpen = $event"
    [isOpen]="isFormSuccessOpen">
</app-form-success>


<!-- 
    {
        "SaleChars":[
            {
                "SaleCharName":"Лазурит-11",
                "Vendor":"Лазурит",
                "CharCost":-835432.000,
                "Id":"f87210c7-13f1-ea11-80fd-001dd8bb025e"
            },
            {
                "SaleCharName":"Шатура-11",
                "Vendor":"Шатура",
                "CharCost":-472146.000,
                "Id":"1d3a4e26-14f1-ea11-80fd-001dd8bb025e"
            }
        ]
    }
 -->